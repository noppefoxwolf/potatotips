slidenumbers: true

# UIのブラックボックスを探る

## iOSDC23 day1 Track B noppe

---

## noppe

- iOS app dev
- きつねが好き

---

## DeNAブースで、脳内プレビュー大会が行われています

---

## 今日話すこと

コード -> GUI
GUI -> コード

---

# GUIからコードを導く能力が大事

- アプリを作る上で、カスタムビューはどうしても必要になる
- 基本的にはfigmaなどのデザインからGUIを実装することにな
- GUIが表面的なハリボテになるか、高品質なUIになるかは、実装者の能力次第

---

## UIのブラックボックス

- デザインに無い情報 = ブラックボックス
- プラットフォーム専門のエンジニアは、知識と経験でブラックボックスを解明するのが仕事

---

# 解明する力を養うには

- システムコンポーネントをとことん解剖する
- システムコンポーネントは、品質の理想値

---

# システムコンポーネントの解剖

- 見る
- 触る
- 聞く
- 構造を分析する

^ 例を挙げて解説していく

---

# 見る

- GUIは見た目が半分くらい
- 基本はスクショや画面録画をして計測、実装して比較する
  - 一番簡単で確実

---

## サイズ

- スクショを撮影して、測る
- 画面のスケールを割った値が、実際にCGRectで指定する値

---

## 色

- スクショを撮影して、測る
- ダイナミックカラーはダークモードなどで色が変わるので注意
- 単色で無い場合も多いので注意

--- 

## アニメーション

- スクリーンレコードをして、フレームを確認する
- iinaを使えば、フレーム単位でコマ送りできる

---

## より詳しく見る

- lookin, Reveal, XcodeのDebug View Hierarchyなどのツールを使う
- これらのツールは、アプリのUIを解析して、UIの構造を可視化する
- これで直接答えを得ることができる

---

# デモ



---

# 触る

---

## インタラクション・ジェスチャー

- タップ、スワイプ、ピンチなどのジェスチャーを実際に試す
- タップ位置を可視化するツールを使うと、実際のタップ位置や動きからズラしていることもわかる
- 不可視のジェスチャーもあるので注意
  - シェイク、マルチタップ、3Dタッチなど
- ポインターAPI

---

## 動的な要素

- 見るだけではわからない要素もある
- 例えば、ボタンの有効無効や、セルの表示・非表示など
- 状態を見つけたら、再度観察をする

---

## アクセシビリティ

- VoiceOverなどのアクセシビリティ機能を使う
- アクセシビリティ機能は、UIを変化させる

---

## 聞く

---

## 効果音・haptic feedback

---

# 構造を分析する

---

## subview探索

- subviewsプロパティを使う

---

## クラス名からメソッドリストを探す

- Objective-Cの場合は、クラス名からメソッドリストを探す

---

## invoke method

- なんでもできる

---

## まとめ

---

## おわり
